apiVersion: kubeadm.k8s.io/v1beta2
kind: InitConfiguration
bootstrapTokens:
  - token: "9a08jv.c0izixklcxtmnze7"
    description: "kubeadm bootstrap token"
    ttl: "24h"
nodeRegistration:
  kubeletExtraArgs:
    cloud-provider: "external"

---
apiVersion: kubeadm.k8s.io/v1beta2
kind: ClusterConfiguration
clusterName: "lingxian-k8s"
kubernetesVersion: v{{ k8s_version }}
networking:
  podSubnet: {{ pod_ip_range }}
imageRepository: "k8s.gcr.io"
useHyperKubeImage: true
apiServer:
  certSANs:
    - {{ ansible_local_ip }}
    - {{ ansible_public_ip }}
  extraArgs:
    cloud-provider: "external"
    runtime-config: storage.k8s.io/v1=true
controllerManager:
  extraArgs:
    cloud-provider: "external"